<!DOCTYPE html>
<html lang="en" ng-app="testApp">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="../css/style.css">
		<style type="text/css">
		</style>
		<script type="text/javascript" src="../js/angular.min.js"></script>
		<script type="text/javascript" src="../js/mathinput.js"></script>
		<script type="text/javascript">
			var $_GET = {};
			if(document.location.toString().indexOf('?') !== -1) {
				var query = document.location
					.toString()
					// get the query string
					.replace(/^.*?\?/, '')
					// and remove any existing hash string (thanks, @vrijdenker)
					.replace(/#.*$/, '')
					.split('&');

				for(var i=0, l=query.length; i<l; i++) {
					var aux = decodeURIComponent(query[i]).split('=');
					$_GET[aux[0]] = aux[1];
				}
			}
			
			var testApp = angular.module("testApp", ["mathInput"]);
			testApp.controller("TestFormController", function() {
				this.mathval = null;
			});
		</script>
	</head>
	<body ng-controller="TestFormController as testform" ng-init="cont = [1]">
		<form action="" method="get">
			<div ng-repeat="c in cont">
				<adm-math-input adm-format="'latex'" adm-name="'math'+c" adm-value="mathval"></adm-math-input>
				<textarea cols="50" rows="10">{{mathval}}</textarea>
			</div>
			<button type="submit">Send</button>
		</form>
		<script type="text/javascript">document.write("<textarea style='width:300px;height:100px;'>"+$_GET['math1']+"</textarea>");</script>
		<script type="text/javascript">document.write("<textarea style='width:300px;height:100px;'>"+$_GET['math2']+"</textarea>");</script>
	</body>
</html>
